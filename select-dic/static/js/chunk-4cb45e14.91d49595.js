(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cb45e14"],{"24d2":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAA9klEQVRYhb3YMQ7CMAwFUIMYuBFLb9bAAOFmXbgSC8hSs1SJZcff9timzZPbxk5PJMS2faTTmliJiOeoPHZZbsNLLt6ZhFgbYI8qDT4nIV5EVLIhR0SLayakDBDvzIyU/RGYEUjICFE1CBREQty1N/FCIAgvBIbwQKCIWQgcMQMJQVghYQgLJBShhYQjNJAUhAYyapx+SIQGwtl4dI5zNp6ZkDSM9qsJx1jWkVCMdWUNw8zUmhDMbPWFYzz9CBTj7dBgGETPCsGgung3BrmvkTC9whkGkTCjKh4GaZhei/DNhnAc+xXOkpiRyP8jbTPOPY38jhDRH3mJQtWA/lz+AAAAAElFTkSuQmCC"},"657b":function(t,e,s){},6836:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"all"},[a("ul",{staticClass:"form-list"},[a("li",[a("img",{attrs:{src:s("24d2"),alt:""},on:{click:t.backPage}}),t._v(" "),a("span",[t._v("个人基础信息")])]),t._v(" "),a("li",[a("span",[t._v("姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"inp-style",attrs:{type:"text"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})]),t._v(" "),a("li",[a("span",[t._v("性别")]),t._v(" "),a("div",{staticClass:"div-style",on:{click:function(e){t.sexSelectShow=!t.sexSelectShow}}},[t._v("\n            "+t._s(t.formData.sex)+"\n            "),t.sexSelectShow?a("div",{staticClass:"sex-select-div"},[a("p",{on:{click:function(e){t.formData.sex="男"}}},[t._v("男")]),t._v(" "),a("p",{on:{click:function(e){t.formData.sex="女"}}},[t._v("女")])]):t._e()]),t._v(" "),a("img",{attrs:{src:s("fba5"),alt:""}})]),t._v(" "),a("li",[a("span",[t._v("手机")]),t._v(" "),a("div",{staticClass:"div-style"},[t._v(t._s(t.formData.mobile?t.formatData(t.formData.mobile):""))])]),t._v(" "),a("li",[a("span",[t._v("真实姓名")]),t._v(" "),a("input",{staticClass:"inp-style-4",attrs:{type:"text",maxlength:"8",disabled:""},domProps:{value:t.formData.realName}})]),t._v(" "),a("li",[a("span",[t._v("身份证号")]),t._v(" "),a("input",{staticClass:"inp-style-4",attrs:{type:"text",maxlength:"18",disabled:""},domProps:{value:t.formData.idCard}})])])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"mobile-popup"},[t.popupShow?a("div",{staticClass:"popup-bg",on:{click:function(e){t.popupShow=!t.popupShow}}}):t._e(),t._v(" "),t.popupShow?a("div",{staticClass:"mobile-popup-con"},[a("p",{staticClass:"popup-title"},[t._v(t._s(t.mobileAdd_edit?"确认新手机号":"修改手机号"))]),t._v(" "),a("div",{staticClass:"popup-div"},[t.mobileAdd_edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.setMobile,expression:"setMobile"}],staticClass:"other",attrs:{type:"number",placeholder:"请输入手机号码",oninput:"value=value.replace(/[^\\d-]/g,'')"},domProps:{value:t.setMobile},on:{input:function(e){e.target.composing||(t.setMobile=e.target.value)}}}):a("div",{staticClass:"popup-show-mobile"},[t._v(t._s(t.formatData(t.setMobile)))]),t._v(" "),a("span",{staticClass:"timer-span",on:{click:function(e){t.sendStatus&&t.sendCode()}}},[t._v(t._s(t.sendText))])]),t._v(" "),a("div",{staticClass:"popup-div"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.setCode,expression:"setCode"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.setCode},on:{input:function(e){e.target.composing||(t.setCode=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"popup-div-btn"},[t.mobileAdd_edit?t._e():a("span",{on:{click:t.editNext}},[t._v("下一步")]),t._v(" "),t.mobileAdd_edit?a("span",{on:{click:t.confirmMobile}},[t._v("确定")]):t._e()])]):t._e()]),t._v(" "),a("div",{staticClass:"idcard-popup"},[t.idcardShow?a("div",{staticClass:"popup-bg",on:{click:function(e){t.idcardShow=!t.idcardShow}}}):t._e(),t._v(" "),t.idcardShow?a("div",{staticClass:"mobile-popup-con"},[a("p",{staticClass:"popup-title"},[t._v("身份信息验证")]),t._v(" "),a("div",{staticClass:"popup-div"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.realName,expression:"realName"}],attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.realName},on:{input:function(e){e.target.composing||(t.realName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"popup-div"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.idCard,expression:"idCard"}],attrs:{type:"text",placeholder:"请输入身份证号"},domProps:{value:t.idCard},on:{input:function(e){e.target.composing||(t.idCard=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"popup-div-btn"},[a("span",{on:{click:t.confirmIdcard}},[t._v("确定")])])]):t._e()]),t._v(" "),a("div",{staticClass:"password-popup"},[t.password_popupShow?a("div",{staticClass:"popup-bg",on:{click:function(e){t.password_popupShow=!t.password_popupShow}}}):t._e(),t._v(" "),t.password_popupShow?a("div",{staticClass:"mobile-popup-con"},[a("p",{staticClass:"popup-title"},[t._v("修改密码")]),t._v(" "),a("div",{staticClass:"popup-div"},[a("div",{staticClass:"popup-show-mobile"},[t._v(t._s(t.formData.mobile?t.formatData(t.formData.mobile):""))]),t._v(" "),a("span",{staticClass:"timer-span",on:{click:function(e){t.sendStatus&&t.sendCode()}}},[t._v(t._s(t.sendText))])]),t._v(" "),a("div",{staticClass:"popup-div"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.setCode,expression:"setCode"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.setCode},on:{input:function(e){e.target.composing||(t.setCode=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"popup-div"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.setPassword,expression:"setPassword"}],attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:t.setPassword},on:{input:function(e){e.target.composing||(t.setPassword=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"popup-div-btn"},[a("span",{on:{click:function(e){t.password_popupShow=!t.password_popupShow}}},[t._v("取消")]),t._v(" "),a("span",{on:{click:t.edit_password_}},[t._v("确定")])])]):t._e()])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-div"},[s("div",{staticClass:"submit-div"})])}],i=(s("a481"),s("3b2b"),s("7f7f"),s("0fea")),n=s("a78e"),d=s.n(n),c={name:"index",components:{},props:{},data:function(){return{formData:{id:"",name:"",sex:"",mobile:"",password:"",idCard:"",realName:""},createTime:"",sexSelectShow:!1,setMobile:"",setCode:"",setPassword:"",sendText:"发送验证码",sendStatus:!0,clearTime:null,popupShow:!1,mobileAdd_edit:!1,password_popupShow:!1,idcardShow:!1,toastItem:null,editEnabled:!0,realName:"",idCard:""}},created:function(){var t=this,e=this.$route.query;console.log(e),e.checkMobile&&this.popupShowFun(),this.initFormData(),window.addEventListener("popstate",(function(e){t.$router.push({path:"/my"})}),!1)},methods:{initFormData:function(){var t=this,e=JSON.parse(d.a.get("member"+this.systemType));for(name in this.formData)this.formData[name]=e[name];this.createTime=e.createTime,this.formData.name=e.realName,this.formData.sex="1"==e.sex?"男":"2"==e.sex?"女":"",Object(i["a"])("/wxgetBasicUserInfo",{}).then((function(e){0===e.code&&(console.log(e),t.formData.idCard=e.data.idCard,t.formData.realName=e.data.realName,e.data.idCard&&(t.editEnabled=!1))}))},showToast:function(t){this.toastItem=this.Toast.loading({duration:0,forbidClick:!0,message:t||"加载中..."})},clearToast:function(){this.toastItem.clear()},submit:function(){var t=this,e={};for(name in this.formData)e[name]=this.formData[name];if(e.sex="男"==e.sex?"1":"女"==e.sex?"2":"",e.password||delete e.password,e.name&&e.sex&&e.mobile&&e.idCard){var s=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;s.test(e.idCard)?(this.showToast(),console.log(e),Object(i["a"])("/Wx/saveOrUpdate",{body:e}).then((function(e){0==e.code&&(t.Notify({type:"success"==e.msg?"success":"warning",message:"保存"+("success"==e.msg?"成功":"失败")}),t.$store.dispatch("user/getInfo").then((function(){}))),t.clearToast()})).catch((function(e){t.clearToast(),console.log(e)}))):this.Toast("身份证号码格式有误")}else this.Toast("请完善所有信息")},backPage:function(){this.$router.push("/my")},popupShowFun:function(){this.formData.mobile?(this.setMobile=this.formData.mobile,this.mobileAdd_edit=!1):this.mobileAdd_edit=!0,this.popupShow=!0},editIcardInfo:function(){this.editEnabled?this.idcardShow=!0:this.Toast("你已经完成了实名认证！")},confirmIdcard:function(){console.log(""==this.realName),console.log(""==this.idCard),""!=this.realName?""!=this.realName?(this.formData.realName=this.realName,this.formData.idCard=this.idCard,this.idcardShow=!1):this.Toast("请输入身份证号"):this.Toast("请输入真实姓名")},editNext:function(){var t=this;if(""!=!this.setMobile||this.setCode){var e={mobile:this.setMobile,code:this.setCode};this.showToast(),Object(i["a"])("/Wx/checkcode",{body:e}).then((function(e){0==e.code&&(1==e.data.checkstate?(t.mobileAdd_edit=!0,t.setMobile="",t.setCode="",t.sendText="发送验证码",t.sendStatus=!0,t.clearTime&&clearInterval(t.clearTime)):0==e.data.checkstate&&t.Toast("验证码有误")),t.clearToast()})).catch((function(e){console.log(e),t.clearToast()}))}else this.Toast("请输入手机号和验证码")},confirmMobile:function(){var t=this;if(console.log(""==this.setMobile),console.log(""==this.setCode),""!=this.setMobile&&""!=this.setCode){var e={mobile:this.setMobile,code:this.setCode};console.log(e),this.showToast(),Object(i["a"])("/Wx/checkcode",{body:e}).then((function(e){t.clearToast(),0==e.code&&(1==e.data.checkstate?(t.formData.mobile=t.setMobile,t.popupShow=!1):0==e.data.checkstate&&t.Toast("验证码有误"))})).catch((function(e){t.clearToast(),console.log(e)}))}else this.Toast("请输入手机号和验证码")},sendCode:function(){var t=this;if(""!=this.setMobile){var e=new RegExp(/^1[3456789]\d{9}$/);e.test(this.setMobile)?(this.showToast("发送中..."),Object(i["a"])("/Wx/verification",{body:this.setMobile}).then((function(e){0==e.code&&t.Notify({type:"success"==e.msg?"success":"warning",message:"发送"+("success"==e.msg?"成功":"失败")}),t.sendStatusTime(),t.clearToast()})).catch((function(e){t.clearToast(),console.log(e)}))):this.Toast("手机号码格式有误")}else this.Toast("请输入手机号码")},sendStatusTime:function(){var t=this,e=60;this.clearTime=setInterval((function(){e--,t.sendText="已发送"+e+"s",t.sendStatus=!1,0==e&&(clearInterval(t.clearTime),t.sendText="发送验证码",t.sendStatus=!0)}),1e3)},formatData:function(t){return t.replace(t.substring(3,7),"****")},show_edit_psd:function(){""!=this.formData.mobile?(this.setMobile=this.formData.mobile,this.password_popupShow=!this.password_popupShow):this.Toast("请先绑定手机号码")},edit_password_:function(){var t=this;if(this.setMobile||this.setCode||this.setPassword){var e={mobile:this.setMobile,code:this.setCode};console.log(e),Object(i["a"])("/Wx/checkcode",{body:e}).then((function(e){0==e.code&&(1==e.data.checkstate?(t.formData.password=t.setPassword,t.password_popupShow=!1):0==e.data&&t.Toast("验证码有误"))})).catch((function(t){console.log(t)}))}else this.Toast("请输入完整信息")}}},l=c,p=(s("a825"),s("2877")),r=Object(p["a"])(l,a,o,!1,null,"399e7431",null);e["default"]=r.exports},a825:function(t,e,s){"use strict";s("657b")},fba5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABBElEQVRoge2WQQ6CMBQFR2O8khuPpi5UbubGI7nSkBTTVKCl/R83b1aUNDBDPkkRQgghhBDib2zmXvx4PIfLE7AHLiuJXoEX0PWL4/EwuXFX8LBe/hatvSN6+XO07uY2bzMPS+XP4QVepPL34FAdMDZiXhGp/JzDl1zAbWJkrCOm5C/JBPyQC2CFiGp5CgNwjGiSZ0EADhHN8iwMwDDCRJ6KAAwizOSpDKAhwlSehgAqIszlaQwgExFLuchTeBbKMQikX304Ary95DEKoCAixUQegxGKmRqnFDN5jAMoiDCVxyGAIOg28ykeAYRzfBzhIo/hTzzGPdzbeMkLIYQQQgjxR4APOVJCvmvX3cgAAAAASUVORK5CYII="}}]);